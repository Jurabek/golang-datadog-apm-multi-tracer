version: "3.7"

services:
    sample-app:
      build: sample-app

    dynamodb-local:
      image: amazon/dynamodb-local:latest
      container_name: dynamodb-local
      ports:
        - "8000:8000"

    # agent section
    datadog:
      image: datadog
      links:
      - redis # ensures that redis is a host that the container can find
      - sample-app # ensures that the web app can send metrics
      environment:
      - DD_API_KEY=__your_datadog_api_key_here__
      volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /proc/:/host/proc/:ro
      - /sys/fs/cgroup:/host/sys/fs/cgroup:ro